<!-- Title -->
<div class="flex items-center justify-center w-full h-full mt-20 mb-10">
    <div class="w-10/12">
        <h1 class="text-center text-3xl lg:text-4xl font-semibold text-gray-300">Submit Your Recipe</h1>
    </div>
</div>
  
<div class="flex flex-col w-full justify-center items-center lg:text-xl font-semibold mt-10 mb-20">

    <% if(infoSubmitMessage != '') { %>
        <div class="w-10/12 sm:w-7/12 xl:w-4/12 flex justify-center items-center my-10">
            <div class="w-full bg-green-800 bg-opacity-25 rounded-md">
               <div class="border-l-2 border-green-500 text-left font-medium text-green-500 text-lg py-3 pl-3 rounded-md">
                    <%= infoSubmitMessage %>
                </div>
            </div>
        </div>
    <% } %>

    <% if(infoErrorMessage != '') { %>
        <div class="w-10/12 sm:w-7/12 xl:w-4/12 flex justify-center items-center my-10">
            <div class="w-full bg-red-800 bg-opacity-25 rounded-md">
               <div class="border-l-2 border-red-500 text-left font-medium text-red-500 text-lg py-3 pl-3 rounded-md">
                    <%= infoErrorMessage[0].message %>
                </div>
            </div>
        </div>
    <% } %>

    <form class="space-y-8 w-10/12 sm:w-7/12 xl:w-4/12" action="/submit-recipe" enctype="multipart/form-data" method="post" id="form" autocomplete="off">
        <!-- Name -->
        <div class="relative w-full">
            <input type="text" name="name" id="name" placeholder=" " required class="peer block w-full appearance-none border-b-2 border-gray-400 bg-transparent py-2 text-lg focus:border-gray-300 text-gray-400 focus:outline-none focus:ring-0"/>
            <label for="name" class="absolute top-3 -z-10 origin-[0] -translate-y-8 scale-75 text-lg text-gray-400 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-8 peer-focus:scale-75 peer-focus:text-gray-300">
            Recipe name
            </label>
        </div>
        
        <!-- Email -->
        <div class="relative w-full">
            <input type="email" name="email" id="email" placeholder=" " required class="peer block w-full appearance-none border-b-2 border-gray-400 bg-transparent py-2 text-lg focus:border-gray-300 text-gray-400 focus:outline-none focus:ring-0"/>
            <label for="email" class="absolute top-3 -z-10 origin-[0] -translate-y-8 scale-75 text-lg text-gray-400 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-8 peer-focus:scale-75 peer-focus:text-gray-300">
            Email
            </label>
        </div>

        <!-- Category -->
        <div class="w-full h-full relative" @click.away="openCategory = false" x-data="{ openCategory: false, categoryText:'Category'}">
            <label @click="openCategory = !openCategory" class="flex justify-between items-center border-b-2 border-gray-400 hover:border-gray-300 cursor-pointer w-full text-gray-400 hover:text-gray-300 duration-300 bg-transparent py-2 text-lg text-left">
                <span x-text="categoryText"></span>
                <svg fill="currentColor" viewBox="0 0 20 20" :class="{'rotate-180': openCategory, 'rotate-0': !openCategory}" class="w-4 h-4  transition-transform duration-200 transform "><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
            </label>

            <div x-show="openCategory" x-transition:enter="duration-300" x-transition:enter-start="transform opacity-0 scale-75" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="duration-300" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-75" class="z-10 absolute w-full origin-top-right">
                <div class="px-2 py-2 rounded-b-md text-lg bg-[#181920] text-gray-400">
                    <ul class="flex flex-col cursor-pointer">
                        <li @click="categoryText='American',openCategory=!openCategory; document.getElementById('category').value = 'American'" x-show="categoryText != 'American'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <div class="">American</div>
                        </li>
                
                        <li @click="categoryText='Chinese',openCategory=!openCategory; document.getElementById('category').value = 'Chinese'" x-show="categoryText != 'Chinese'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <div class="">Chinese</div>
                        </li>

                        <li @click="categoryText='French',openCategory=!openCategory; document.getElementById('category').value = 'French'" x-show="categoryText != 'French'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <div class="">French</div>
                        </li>

                        <li @click="categoryText='Italian',openCategory=!openCategory; document.getElementById('category').value = 'Italian'" x-show="categoryText != 'Italian'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <div class="">Italian</div>
                        </li>

                        <li @click="categoryText='Japanese',openCategory=!openCategory; document.getElementById('category').value = 'Japanese'" x-show="categoryText != 'Japanese'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <div class="">Japanese</div>
                        </li>

                        <li @click="categoryText='Korean',openCategory=!openCategory; document.getElementById('category').value = 'Korean'" x-show="categoryText != 'Korean'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <div class="">Korean</div>
                        </li>

                        <li @click="categoryText='Mexican',openCategory=!openCategory; document.getElementById('category').value = 'Mexican'" x-show="categoryText != 'Mexican'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <div class="">Mexican</div>
                        </li>

                        <li @click="categoryText='Spanish',openCategory=!openCategory; document.getElementById('category').value = 'Spanish'" x-show="categoryText != 'Spanish'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <div class="">Spanish</div>
                        </li>

                        <li @click="categoryText='Turk',openCategory=!openCategory; document.getElementById('category').value = 'Turk'" x-show="categoryText != 'Turk'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <div class="">Turk</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div> 

        <!-- Category value-->
        <input type="hidden" id="category" name="category" value="">

        <!-- Time -->
        <div class="flex w-full h-full">
            <div class="relative w-full">
                <input type="number" name="time" id="time" placeholder=" " maxlength="2" min="1" max="59" class="peer block w-full appearance-none border-b-2 border-gray-400 bg-transparent py-2 text-lg text-gray-400 focus:border-gray-300 focus:outline-none focus:ring-0"/>
                <label for="time" class="absolute top-3 -z-10 origin-[0] -translate-y-8 scale-75 text-lg text-gray-400 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-8 peer-focus:scale-75 peer-focus:text-gray-300">
                        Time
                </label>
            </div>
            <div class="w-full relative" @click.away="openTime = false" x-data="{ openTime: false, timeText:'Unit of time'}">
                <label name="unitOfTime" @click="openTime = !openTime" class="flex justify-between items-center text-center border-b-2 border-gray-400 hover:border-gray-300 cursor-pointer w-full text-gray-400 hover:text-gray-300 duration-300 bg-transparent py-2 pl-5 text-lg">
                    <span x-text="timeText"></span>
                    <svg fill="currentColor" viewBox="0 0 20 20" :class="{'rotate-180': openTime, 'rotate-0': !openTime}" class="w-4 h-4 transition-transform duration-200 transform "><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                </label>

                <div x-show="openTime" x-transition:enter="duration-300" x-transition:enter-start="transform opacity-0 scale-75" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="duration-300" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-75" class="z-10 absolute w-full origin-top-right">
                    <div class="px-2 py-2 rounded-b-md text-lg bg-[#181920] text-gray-400">
                        <ul class="flex flex-col cursor-pointer">
                            <li @click="timeText='Hour',openTime=!openTime; document.getElementById('unitOfTime').value = 'Hour'" x-show="timeText != 'Hour'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                                <div class="">Hour</div>
                            </li>

                            <li @click="timeText='Minute',openTime=!openTime; document.getElementById('unitOfTime').value = 'Minute'" x-show="timeText != 'Minute'" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                                <div class="">Minute</div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div> 
        </div>

        <!-- Unit of Time value-->
        <input type="hidden" id="unitOfTime" name="unitOfTime" value="">

        <!-- Difficulty -->
        <div class="w-full h-full relative" @click.away="openDifficulty = false"  x-data="{ openDifficulty: false, difficultyText:'Difficulty'}">
            <label @click="openDifficulty = !openDifficulty" class="flex justify-between items-center border-b-2 border-gray-400 hover:border-gray-300 cursor-pointer w-full text-gray-400 hover:text-gray-300 duration-300 bg-transparent py-2 text-lg text-left">
                <span x-text="difficultyText"></span>
                <svg fill="currentColor" viewBox="0 0 20 20" :class="{'rotate-180': openDifficulty, 'rotate-0': !openDifficulty}" class="w-4 h-4  transition-transform duration-200 transform "><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
            </label>

            <div x-show="openDifficulty" x-transition:enter="duration-300" x-transition:enter-start="transform opacity-0 scale-75" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="duration-300" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-75" class="z-10 absolute w-full origin-top-right">
                <div class="px-2 py-2 rounded-b-md text-lg bg-[#181920] text-gray-400">
                    <ul class="flex flex-col cursor-pointer">
                        <li @click="difficultyText='Easy', openDifficulty=!openDifficulty; document.getElementById('difficulty').value = 'Easy'" x-show="difficultyText != 'Easy'" value="Easy" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <span>Easy</span>
                        </li>
                
                        <li @click="difficultyText='Medium', openDifficulty=!openDifficulty; document.getElementById('difficulty').value = 'Medium'" x-show="difficultyText != 'Medium'" value="Medium" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <span>Medium</span>
                        </li>

                        <li @click="difficultyText='Hard', openDifficulty=!openDifficulty; document.getElementById('difficulty').value = 'Hard'" x-show="difficultyText != 'Hard'" value="Hard" class="flex items-start rounded-md p-2 hover:bg-[#272a36]">
                            <span>Hard</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div> 

        <!-- Difficulty value-->
        <input type="hidden" id="difficulty" name="difficulty" value="">

        <!-- Ingredients -->
        <div class="w-full">
            <div class="relative">
                <input type="text" name="ingredients" placeholder=" " id="ingredientInput" class="peer block w-full appearance-none border-b-2 border-gray-400 bg-transparent py-2 pr-32 text-lg text-gray-400 focus:border-gray-300 focus:outline-none focus:ring-0" maxlength="50"/>
                <label for="ingredients" class="absolute top-3 -z-10 origin-[0] -translate-y-8 scale-75 text-lg text-gray-400 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-8 peer-focus:scale-75 peer-focus:text-gray-300">
                    Ingredients
                </label>
                <div class="flex justify-start items-center">
                    <button type="button" onClick="newIngredient();" class="absolute right-0 bottom-0 flex items-center justify-center text-center text-gray-400 focus:text-gray-300 text-sm rounded-md py-2 px-1 transition duration-300 ease-linear space-x-0.5">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1.4rem" height="1.4rem" viewBox="0 0 24 24"><path fill="currentColor" d="M19 19V5H5v14h14m0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4V7Z"/>
                        </svg>
                        <span>Add ingredient</span>
                    </button>
                </div>
            </div>
            <div class="text-sm hidden text-red-600 mt-2" id="ingredientWarning">Please write an ingredient.</div>
            <ul id="ingredientList"></ul>
        </div>

        <!-- Steps -->
        <div class="w-full">
            <div class="flex items-center relative">
                <textarea name="steps" placeholder=" " rows="1" id="stepInput" style="@media only screen and (max-width: 640px) {width: 30%};
                    width: 85%" class="peer block appearance-none border-b-2 border-gray-400 bg-transparent py-2 pr-16 sm:pr-3 text-lg text-gray-400 focus:border-gray-300 focus:outline-none focus:ring-0"></textarea>
                <label for="steps" class="absolute top-3 -z-10 origin-[0] -translate-y-8 scale-75 text-lg text-gray-400 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-8 peer-focus:scale-75 peer-focus:text-gray-300">
                    Steps
                </label>
                <div class="flex justify-start items-center">
                    <button type="button" onClick="newStep();" class="border-b-2 border-gray-400 absolute right-0 bottom-0 flex items-center justify-center text-center text-gray-400 focus:text-gray-300 text-sm py-2 px-3 transition duration-300 ease-linear space-x-0.5">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1.4rem" height="1.4rem" viewBox="0 0 24 24"><path fill="currentColor" d="M19 19V5H5v14h14m0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4V7Z"/>
                        </svg>
                        <span>Add step</span>
                    </button>
                </div>
            </div>
            <div class="text-sm hidden text-red-600 mt-2" id="stepWarning">Please write a step.</div>
            <ul id="stepList"></ul>
        </div>

        <!-- Image -->
        <div class="relative w-full">
            <input type="file" name="file" id="file" class="peer block appearance-none border-b-2 border-gray-500 bg-transparent py-2 text-lg focus:border-gray-300 focus:outline-none focus:ring-0 w-0 h-0 opacity-0 -z-10 absolute" accept="image/*" onchange='uploadFile(this)'/>

            <label for="file" id="fileLabel" class="flex justify-center items-center w-full h-full cursor-pointer border-2 hover:border-gray-300 border-gray-400 border-dashed duration-300 py-12 px-0 rounded-md text-gray-400 hover:text-gray-300 text-lg">Recipe image</label>
        </div>
  
        <div class="flex justify-center items-center">
            <button type="submit" id="submitButton" class="bg-[#272a36] w-full text-center hover:bg-opacity-75 text-gray-300 font-medium rounded-md py-3 transition duration-200 ease-linear">Submit Recipe</button>
        </div>
    </form>
</div>